{"version":3,"sources":["../src/bin.js"],"names":[],"mappings":";;AAEA;;AAEA,IAAM,OAAO,QAAQ,IAAR,CAAa,MAAb,CAAoB,CAApB,CAAb;;;AAGA,IAAM,OAAO,gBAAgB,IAAhB,EAAsB,IAAtB,KAA+B,QAAQ,GAAR,CAAY,sBAAZ,CAA5C;AACA,IAAM,OAAO,gBAAgB,IAAhB,EAAsB,IAAtB,KAA+B,QAAQ,GAAR,CAAY,sBAAZ,CAA5C;;;AAGA,IAAM,SAAS,QAAQ,sBAAR,CAAf;;;;AAIA,IAAM,OAAO,OAAO,KAAP,CAAa,EAAC,UAAD,EAAO,UAAP,EAAa,OAAO,qBAAkB;AAAA,QAAhB,IAAgB,QAAhB,IAAgB;AAAA,QAAV,IAAU,QAAV,IAAU;;AAC9D,YAAQ,GAAR,+BAAwC,IAAxC,SAAgD,IAAhD;AACD,GAFyB,EAAb,CAAb;;;;;AAOA,OAAO,SAAP,CAAiB,iBAAuB;AAAA,MAArB,IAAqB,SAArB,IAAqB;AAAA,MAAf,IAAe,SAAf,IAAe;AAAA,MAAT,GAAS,SAAT,GAAS;;AACtC,MAAI,QAAQ,iBAAZ,EAA+B;AAC7B,SAAK,YAAM;AACT,cAAQ,GAAR,OAAgB,IAAhB,SAAwB,IAAxB;AACA,cAAQ,GAAR,OAAgB,IAAhB,SAAwB,IAAxB;AACD,KAHD;AAID;AACF,CAPD;;;;AAWA,SAAS,eAAT,CAA0B,IAA1B,EAAgC,IAAhC,EAAsC;AACpC,MAAM,IAAI,KAAK,OAAL,CAAa,IAAb,CAAV;AACA,MAAI,MAAM,CAAC,CAAX,EAAc,OAAO,SAAP;AACd,SAAO,KAAK,IAAI,CAAT,CAAP;AACD","file":"bin.js","sourcesContent":["\n\n'use strict'\n\nconst argv = process.argv.splice(2)\n\n// ENV defaults\nconst host = getValueForFlag('-h', argv) || process.env['ECHO_WEB_SERVER_HOST']\nconst port = getValueForFlag('-p', argv) || process.env['ECHO_WEB_SERVER_PORT']\n\n// Our server\nconst server = require('./echo-web-server.js')\n\n// Start the server, storing the function returned by the `start` method so we\n// can gracefully shut downt he server later.\nconst stop = server.start({port, host, ready: ({host, port}) => {\n  console.log(`Server running at http://${host}:${port}/`)\n}})\n\n// We'll use the server's addLogger method to give us a way to gracefully\n// shutdown the server. This would be a bad idea in a real application, but\n// it's safe enough for testing.\nserver.addLogger(({host, port, url}) => {\n  if (url === '/stop/stop/stop') {\n    stop(() => {\n      console.log(`[${host}:${port}] Recieved shutdown request \"/stop/stop/stop\"`)\n      console.log(`[${host}:${port}] The Server will shut down!`)\n    })\n  }\n})\n\n// Quick helper function to find any specific command line flags the user may\n// have passed in.\nfunction getValueForFlag (flag, args) {\n  const i = args.indexOf(flag)\n  if (i === -1) return undefined\n  return args[i + 1]\n}\n"]}