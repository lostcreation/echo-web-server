{"version":3,"sources":["../../src/loggers/asHTML.js"],"names":[],"mappings":";;;;;;;;;;;;AAQA,OAAO,OAAP,GAAiB,gBAA8B;AAAA,MAA3B,IAA2B,QAA3B,IAA2B;AAAA,MAArB,IAAqB,QAArB,IAAqB;AAAA,MAAf,GAAe,QAAf,GAAe;AAAA,MAAV,GAAU,QAAV,GAAU;;AAC7C,MAAM,aAAa,SAAb,UAAa,CAAC,GAAD;AAAA,WACX,CAAE,CAAC,IAAD,EAAO,OAAP,CAAF,EACE,CAAC,IAAD,EAAO,MAAP,CADF,EAEE,CAAC,IAAD,EAAO,MAAP,CAFF,EAGE,CAAC,IAAD,EAAO,QAAP,CAHF,EAIE,CAAC,IAAD,EAAO,OAAP,CAJF,EAKE,CAAC,KAAD,EAAQ,OAAR,CALF,EAME,MANF,CAMS,UAAC,CAAD,EAAI,CAAJ;AAAA,aAAU,EAAE,OAAF,6BAAa,CAAb,EAAV;AAAA,KANT,EAMoC,GANpC,CADW;AAAA,GAAnB;;AASA,MAAM,2hBAoBiB,uBAAqB,IAArB,SAA6B,IAA7B,GAAoC,GAApC,CApBjB,iCAAN,C;;;AA0BA,MAAI,SAAJ,CAAc,cAAd,EAA8B,WAA9B;AACA,MAAI,KAAJ,CAAU,kBAAV;AACD,CAtCD","file":"asHTML.js","sourcesContent":["/**\r\n * Renders HTML summary of the request for the client.\r\n * @param {Object} requestInfo       - Logging info for the the request.\r\n * @param {string} requestInfo.host  - Servers host or IP address.\r\n * @param {string} requestInfo.port  - Port the server is listening on.\r\n * @param {string} requestInfo.url   - The path requested by the client.\r\n * @param {object} requestInfo.res   - The server response object that will recieve the HTML.\r\n */\r\nmodule.exports = ({ host, port, url, res }) => {\r\n  const escapeHTML = (str) =>\r\n          [ [/&/g, '&amp;']\r\n          , [/>/g, '&gt;']\r\n          , [/</g, '&lt;']\r\n          , [/\"/g, '&quot;']\r\n          , [/'/g, '&#39;']\r\n          , [/\\`/g, '&#96;']\r\n          ].reduce((p, c) => p.replace(...c), str)\r\n\r\n  const HTMLTemplateString = `<!DOCTYPE html>\r\n<html lang=\"en\">\r\n  <head>\r\n    <meta charset=\"utf-8\">\r\n    <title>Echo Web Server</title>\r\n    <style>\r\n      #sent, #received {\r\n        margin-left: 2.5em;\r\n      }\r\n    </style>\r\n    <script>\r\n      window.addEventListener(\"load\", function (event) {\r\n        document.getElementById(\"sent\").textContent = decodeURI(document.URL)\r\n      });\r\n    </script>\r\n  </head>\r\n  <body>\r\n    <p>You sent the request:</p>\r\n    <pre id=\"sent\"></pre>\r\n    <p>I saw the request:</p>\r\n    <pre id=\"received\">${escapeHTML(`http://${host}:${port}${url}`)}</pre>\r\n  </body>\r\n</html>\r\n` // END HTMLTemplateString\r\n\r\n  // Send HTML to client\r\n  res.setHeader('Content-Type', 'text/html')\r\n  res.write(HTMLTemplateString)\r\n}\r\n"]}